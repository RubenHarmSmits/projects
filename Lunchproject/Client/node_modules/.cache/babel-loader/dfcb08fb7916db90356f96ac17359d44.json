{"remainingRequest":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js","mtime":1556014538676},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _parseInt from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport EventBus from '../EventBus.js';\nimport DatumSelectie from '../Datumselectie/DatumSelectie.vue';\nimport GeneralFunctionsMixin from '../mixin';\nimport { types as authTypes } from '../../store/auth';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'Producten',\n  mixins: [GeneralFunctionsMixin],\n  data: function data() {\n    var _this = this;\n\n    return {\n      deadlineTijd: null,\n      deadlineDag: null,\n      dialog: false,\n      search: '',\n      headers: [{\n        text: 'Product',\n        align: 'left',\n        sortable: true,\n        value: 'naam'\n      }, {\n        text: 'Categorie',\n        align: 'left',\n        sortable: true,\n        value: 'categorieId'\n      }, {\n        text: 'Prijs',\n        value: 'prijs'\n      }, {\n        text: 'Kies aantal',\n        value: '',\n        sortable: false\n      }],\n      producten: [],\n      categorien: [],\n      categorienFilter: [],\n      winkel: {\n        Winkelnaam: null\n      },\n      toegevoegdeProducten: [],\n      nieuwProduct: \"\",\n      nieuwProductNaam: \"\",\n      nieuwProductPrijs: \"\",\n      nieuwProductCategorieId: \"\",\n      datum: null,\n      rules: {\n        prijsRule: function prijsRule(value) {\n          return _this.testPrijs(value) || \"Foutief formaat.\";\n        },\n        required: function required(value) {\n          return !!value || \"Verplicht veld.\";\n        },\n        hogerDanNul: function hogerDanNul(value) {\n          return !(_parseInt(value) < 0) || 'Kan niet negatief zijn.';\n        }\n      },\n      popup: false,\n      forceer: false,\n      forceerProduct: {\n        product: null,\n        aantal: null\n      },\n      rowsPerPageItems: [10, 20, 30, {\n        \"text\": \"All\",\n        \"value\": -1\n      }]\n    };\n  },\n  components: {\n    DatumSelectie: DatumSelectie,\n    EventBus: EventBus\n  },\n  created: function created() {\n    var _this2 = this;\n\n    EventBus.$on('Datum_update', function (datum) {\n      _this2.fetchData(datum);\n    });\n  },\n  methods: _objectSpread({}, mapGetters(authTypes.name, {\n    getUser: authTypes.getters.getUser\n  }), {\n    fetchCategorienPerWinkel: function fetchCategorienPerWinkel(winkelId) {\n      return this.$http.get(\"categorie/winkel?winkelId=\" + winkelId).then(function (res) {\n        return res.data;\n      });\n    },\n    parsePrijs: function parsePrijs(prijs) {\n      var index = prijs.indexOf('.');\n      if (index < 0) return prijs + \"00\";\n      if (prijs.length - index < 3) prijs = prijs + \"0\";\n      return prijs.slice(0, index) + prijs.slice(index + 1);\n    },\n    testPrijs: function testPrijs(prijs) {\n      var pattern = /^[0-9]+(\\.[0-9]{1,2})?$/;\n      return pattern.test(prijs);\n    },\n    plaatsBestellingDatumGebruiker: function () {\n      var _plaatsBestellingDatumGebruiker = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(product, aantal) {\n        var _this3 = this;\n\n        var user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = this.getUser();\n\n                if (!(_parseInt(aantal) > 10 && !this.forceer)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                this.forceerProduct.product = product;\n                this.forceerProduct.aantal = aantal;\n                this.popup = true;\n                return _context.abrupt(\"return\");\n\n              case 6:\n                this.$http.post(\"bestelling\", {\n                  GebruikerId: user.apiId,\n                  Bezorgdatum: this.datum,\n                  ProductenPerBestellingen: [{\n                    ProductId: product.productId,\n                    Prijs: product.prijs,\n                    Aantal: aantal\n                  }]\n                }).then(function (res) {\n                  _this3.emitProductToegevoegd();\n\n                  _this3.forceer = false;\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function plaatsBestellingDatumGebruiker(_x, _x2) {\n        return _plaatsBestellingDatumGebruiker.apply(this, arguments);\n      }\n\n      return plaatsBestellingDatumGebruiker;\n    }(),\n    forceerBestelling: function forceerBestelling() {\n      this.forceer = true;\n      this.plaatsBestellingDatumGebruiker(this.forceerProduct.product, this.forceerProduct.aantal);\n      this.popup = false;\n    },\n    close: function close() {\n      this.dialog = false;\n    },\n    emitProductToegevoegd: function emitProductToegevoegd() {\n      EventBus.$emit('Product_toegevoegd', this.datum);\n    },\n    filterOpCategorie: function filterOpCategorie(categorieId) {\n      var _this4 = this;\n\n      if (categorieId == -1) this.fetchProducten(this.datum);else {\n        this.$http.get(\"product/categorie?categorieId=\".concat(categorieId)).then(function (res) {\n          _this4.producten = res.data;\n        });\n      }\n    },\n    fetchCategorieen: function () {\n      var _fetchCategorieen = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fetchCategorienPerWinkel(this.winkel.winkelId);\n\n              case 2:\n                this.categorien = _context2.sent;\n                _context2.next = 5;\n                return this.fetchCategorienPerWinkel(this.winkel.winkelId);\n\n              case 5:\n                this.categorienFilter = _context2.sent;\n                this.categorienFilter.push({\n                  categorieId: -1,\n                  categorieNaam: \"Alle Categorien\"\n                });\n                this.categorien.push({\n                  categorieId: null,\n                  categorieNaam: \"Geen categorie\"\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchCategorieen() {\n        return _fetchCategorieen.apply(this, arguments);\n      }\n\n      return fetchCategorieen;\n    }(),\n    fetchWinkel: function () {\n      var _fetchWinkel = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(datum) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", this.$http.get(\"winkel/\".concat(datum)).then(function (res) {\n                  var winkel = res.data;\n                  return winkel;\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchWinkel(_x3) {\n        return _fetchWinkel.apply(this, arguments);\n      }\n\n      return fetchWinkel;\n    }(),\n    fetchData: function () {\n      var _fetchData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(datum) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.datum = datum;\n                _context4.next = 3;\n                return this.fetchWinkel(datum);\n\n              case 3:\n                this.winkel = _context4.sent;\n                this.fetchProducten(datum);\n                this.fetchDeadline(datum);\n                this.fetchCategorieen();\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fetchData(_x4) {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }(),\n    fetchProducten: function () {\n      var _fetchProducten = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(datum) {\n        var _this5 = this;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                this.$http.get(\"product/\".concat(datum)).then(function (res) {\n                  _this5.producten = res.data.map(function (p) {\n                    return _Object$assign(p, {\n                      aantal: 1\n                    });\n                  });\n                });\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function fetchProducten(_x5) {\n        return _fetchProducten.apply(this, arguments);\n      }\n\n      return fetchProducten;\n    }(),\n    fetchDeadline: function () {\n      var _fetchDeadline = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6(datum) {\n        var _this6 = this;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                this.$http.get(\"deadline/\".concat(datum)).then(function (res) {\n                  _this6.deadlineTijd = res.data.substring(11, 16);\n                  _this6.deadlineDag = res.data.substring(0, 10);\n                });\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function fetchDeadline(_x6) {\n        return _fetchDeadline.apply(this, arguments);\n      }\n\n      return fetchDeadline;\n    }(),\n    createProduct: function () {\n      var _createProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee7(productNaam, productPrijs, categorieId) {\n        var _this7 = this;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                productPrijs = this.parsePrijs(productPrijs);\n                this.$http.post(\"product\", {\n                  Naam: productNaam,\n                  categorieId: categorieId,\n                  Prijs: productPrijs,\n                  winkelId: this.winkel.winkelId\n                }).then(function (res) {\n                  _this7.fetchProducten(_this7.datum);\n\n                  _this7.dialog = false;\n                });\n\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function createProduct(_x7, _x8, _x9) {\n        return _createProduct.apply(this, arguments);\n      }\n\n      return createProduct;\n    }()\n  })\n};",{"version":3,"sources":["C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js"],"names":["EventBus","DatumSelectie","GeneralFunctionsMixin","types","authTypes","mapGetters","name","mixins","data","deadlineTijd","deadlineDag","dialog","search","headers","text","align","sortable","value","producten","categorien","categorienFilter","winkel","Winkelnaam","toegevoegdeProducten","nieuwProduct","nieuwProductNaam","nieuwProductPrijs","nieuwProductCategorieId","datum","rules","prijsRule","testPrijs","required","hogerDanNul","popup","forceer","forceerProduct","product","aantal","rowsPerPageItems","components","created","$on","fetchData","methods","getUser","getters","fetchCategorienPerWinkel","winkelId","$http","get","then","res","parsePrijs","prijs","index","indexOf","length","slice","pattern","test","plaatsBestellingDatumGebruiker","user","post","GebruikerId","apiId","Bezorgdatum","ProductenPerBestellingen","ProductId","productId","Prijs","Aantal","emitProductToegevoegd","forceerBestelling","close","$emit","filterOpCategorie","categorieId","fetchProducten","fetchCategorieen","push","categorieNaam","fetchWinkel","fetchDeadline","map","p","substring","createProduct","productNaam","productPrijs","Naam"],"mappings":"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","sourcesContent":["\r\nimport EventBus from '../EventBus.js';\r\nimport DatumSelectie from '../Datumselectie/DatumSelectie.vue'\r\nimport GeneralFunctionsMixin from '../mixin';\r\n\r\nimport { types as authTypes } from '../../store/auth'\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n    name: 'Producten',\r\n\r\n    mixins: [GeneralFunctionsMixin],\r\n\r\n    data() {\r\n        return {\r\n            deadlineTijd: null,\r\n            deadlineDag: null,\r\n            dialog: false,\r\n            search: '',\r\n            headers: [\r\n                {\r\n                    text: 'Product',\r\n                    align: 'left',\r\n                    sortable: true,\r\n                    value: 'naam'\r\n                },\r\n                {\r\n                    text: 'Categorie',\r\n                    align: 'left',\r\n                    sortable: true,\r\n                    value: 'categorieId'\r\n                },\r\n                {\r\n                    text: 'Prijs',\r\n                    value: 'prijs'\r\n                },\r\n                {\r\n                    text: 'Kies aantal',\r\n                    value: '',\r\n                    sortable: false,\r\n                },\r\n\r\n\r\n            ],\r\n            producten: [],\r\n            categorien: [],\r\n            categorienFilter: [],\r\n            winkel: {\r\n                Winkelnaam: null,\r\n            },\r\n            toegevoegdeProducten: [],\r\n            nieuwProduct: \"\",\r\n            nieuwProductNaam: \"\",\r\n            nieuwProductPrijs: \"\",\r\n            nieuwProductCategorieId: \"\",\r\n            datum: null,\r\n            rules: {\r\n                prijsRule: value => {\r\n                    return this.testPrijs(value) || \"Foutief formaat.\";\r\n                },\r\n                required: value => !!value || \"Verplicht veld.\",\r\n                hogerDanNul: value => !(parseInt(value) < 0) || 'Kan niet negatief zijn.',\r\n            },\r\n            popup: false,\r\n            forceer: false,\r\n            forceerProduct: {\r\n                product: null,\r\n                aantal: null,\r\n            },\r\n            rowsPerPageItems: [10, 20, 30, { \"text\": \"All\", \"value\": -1 }],\r\n\r\n\r\n        };\r\n\r\n\r\n    },\r\n\r\n\r\n    components: {\r\n        DatumSelectie,\r\n        EventBus\r\n    },\r\n\r\n    created() {\r\n\r\n        EventBus.$on('Datum_update', (datum) => {\r\n            this.fetchData(datum);\r\n        });\r\n\r\n    },\r\n\r\n\r\n    methods: {\r\n        ...mapGetters(authTypes.name, {\r\n            getUser: authTypes.getters.getUser\r\n        }),\r\n\r\n\r\n        fetchCategorienPerWinkel(winkelId) {\r\n            return this.$http.get(`categorie/winkel?winkelId=` + winkelId)\r\n                .then(res => res.data)                                    \r\n                \r\n        },\r\n\r\n        parsePrijs(prijs) {\r\n            var index = prijs.indexOf('.');\r\n            if (index < 0) return prijs + \"00\";\r\n\r\n            if (prijs.length - index < 3) prijs = prijs + \"0\";\r\n            return prijs.slice(0, index) + prijs.slice(index + 1);\r\n        },\r\n\r\n        testPrijs(prijs) {\r\n            const pattern = /^[0-9]+(\\.[0-9]{1,2})?$/;\r\n            return pattern.test(prijs);\r\n        },\r\n\r\n\r\n        async plaatsBestellingDatumGebruiker(product, aantal) {\r\n            let user = this.getUser()\r\n            if (parseInt(aantal) > 10 && !this.forceer) {\r\n                this.forceerProduct.product = product;\r\n                this.forceerProduct.aantal = aantal;\r\n                this.popup = true;\r\n                return;\r\n            }\r\n            this.$http.post(`bestelling`, {\r\n                GebruikerId: user.apiId,\r\n                Bezorgdatum: this.datum,\r\n                ProductenPerBestellingen: [{\r\n                    ProductId: product.productId,\r\n                    Prijs: product.prijs,\r\n                    Aantal: aantal\r\n                }]\r\n            }).then(res => {\r\n                this.emitProductToegevoegd();\r\n                this.forceer = false;\r\n            })\r\n        },\r\n\r\n\r\n        forceerBestelling() {\r\n            this.forceer = true;\r\n            this.plaatsBestellingDatumGebruiker(this.forceerProduct.product, this.forceerProduct.aantal);\r\n            this.popup = false;\r\n        },\r\n\r\n        close() {\r\n            this.dialog = false\r\n        },\r\n\r\n        emitProductToegevoegd() {\r\n            EventBus.$emit('Product_toegevoegd', this.datum);\r\n        },\r\n\r\n        filterOpCategorie(categorieId) {\r\n            if (categorieId == -1) this.fetchProducten(this.datum)\r\n                           \r\n            else {\r\n                this.$http.get(`product/categorie?categorieId=${categorieId}`)\r\n                    .then(res => {\r\n                        this.producten = res.data;\r\n                    })\r\n            }\r\n            \r\n        },\r\n\r\n        async fetchCategorieen() {\r\n            this.categorien = await this.fetchCategorienPerWinkel(this.winkel.winkelId);\r\n            this.categorienFilter = await this.fetchCategorienPerWinkel(this.winkel.winkelId);\r\n            this.categorienFilter.push({ categorieId: -1, categorieNaam: \"Alle Categorien\" });\r\n            this.categorien.push({ categorieId: null, categorieNaam: \"Geen categorie\" });\r\n        },\r\n        \r\n\r\n        async fetchWinkel(datum) {            \r\n            return this.$http.get(`winkel/${datum}`)\r\n                .then(res => {                \r\n                   let winkel = res.data;\r\n                   return winkel\r\n                })            \r\n        },\r\n\r\n        async fetchData(datum) {\r\n            this.datum = datum;\r\n            this.winkel = await this.fetchWinkel(datum);\r\n            this.fetchProducten(datum);\r\n            this.fetchDeadline(datum);\r\n            this.fetchCategorieen();           \r\n            \r\n        },\r\n\r\n\r\n        async fetchProducten(datum) {\r\n            this.$http.get(`product/${datum}`)\r\n                .then(res => {\r\n                    this.producten = res.data.map(p => Object.assign(p, { aantal: 1 }))\r\n                })\r\n        },\r\n\r\n        async fetchDeadline(datum) {\r\n\r\n            this.$http.get(`deadline/${datum}`)\r\n                .then(res => {\r\n                    this.deadlineTijd = res.data.substring(11, 16);\r\n                    this.deadlineDag = res.data.substring(0, 10);\r\n                })\r\n        },\r\n\r\n\r\n        async createProduct(productNaam, productPrijs, categorieId) {\r\n            \r\n            productPrijs = this.parsePrijs(productPrijs);\r\n            this.$http.post(`product`, {\r\n                Naam: productNaam,\r\n                categorieId: categorieId,\r\n                Prijs: productPrijs,\r\n                winkelId: this.winkel.winkelId\r\n            }).then(res => {\r\n                this.fetchProducten(this.datum);\r\n                this.dialog = false    \r\n            })\r\n        },\r\n\r\n    }\r\n};\r\n"]}]}