{"remainingRequest":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js","mtime":1554385549363},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _parseInt from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport Vue from 'vue';\nimport EventBus from '../EventBus.js';\nimport DatumSelectie from '../Datumselectie/DatumSelectie.vue';\nimport apiPath from '../../Filepaths';\nexport default {\n  name: 'Producten',\n  data: function data() {\n    var _this = this;\n\n    return {\n      deadline: null,\n      dialog: false,\n      search: '',\n      headers: [{\n        text: 'Product',\n        align: 'left',\n        sortable: true,\n        value: 'naam'\n      }, {\n        text: 'Prijs',\n        value: 'prijs'\n      }],\n      producten: [],\n      winkel: {\n        Winkelnaam: null\n      },\n      toegevoegdeProducten: [],\n      nieuwProduct: \"\",\n      nieuwProductNaam: \"\",\n      nieuwProductPrijs: \"\",\n      datum: null,\n      rules: {\n        prijsRule: function prijsRule(value) {\n          return _this.testPrijs(value) || \"Foutief formaat.\";\n        },\n        required: function required(value) {\n          return !!value || \"Verplicht veld.\";\n        },\n        hogerDanNul: function hogerDanNul(value) {\n          return !(_parseInt(value) < 0) || 'Kan niet negatief zijn.';\n        }\n      },\n      popup: false,\n      forceer: false,\n      forceerProduct: {\n        product: null,\n        aantal: null\n      },\n      rowsPerPageItems: [10, 20, 30, {\n        \"text\": \"All\",\n        \"value\": -1\n      }]\n    };\n  },\n  components: {\n    DatumSelectie: DatumSelectie,\n    EventBus: EventBus\n  },\n  created: function created() {\n    var _this2 = this;\n\n    EventBus.$on('Datum_update', function (datum) {\n      _this2.fetchData(datum);\n    });\n  },\n  methods: {\n    veldIngevuld: function veldIngevuld(value) {\n      return !!value;\n    },\n    parsePrijs: function parsePrijs(prijs) {\n      var index = prijs.indexOf('.');\n      if (index < 0) return prijs + \"00\";\n      if (prijs.length - index < 3) prijs = prijs + \"0\";\n      return prijs.slice(0, index) + prijs.slice(index + 1);\n    },\n    testPrijs: function testPrijs(prijs) {\n      var pattern = /^[0-9]+(\\.[0-9]{1,2})?$/;\n      return pattern.test(prijs);\n    },\n    prijsGeformatteerd: function prijsGeformatteerd(prijs) {\n      prijs = prijs.toString();\n\n      while (prijs.length < 3) {\n        prijs = \"0\" + prijs;\n      }\n\n      return prijs.substring(0, prijs.length - 2) + \".\" + prijs.substring(prijs.length - 2);\n    },\n    plaatsBestellingDatumGebruiker: function () {\n      var _plaatsBestellingDatumGebruiker = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(product, aantal) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(_parseInt(aantal) > 10 && !this.forceer)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                this.forceerProduct.product = product;\n                this.forceerProduct.aantal = aantal;\n                this.popup = true;\n                return _context.abrupt(\"return\");\n\n              case 5:\n                _context.next = 7;\n                return fetch(\"\".concat(apiPath, \"bestelling\"), {\n                  method: \"POST\",\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  body: _JSON$stringify({\n                    \"GebruikerId\": 1,\n                    \"Bezorgdatum\": this.datum,\n                    \"ProductenPerBestellingen\": [{\n                      \"ProductId\": product.productId,\n                      \"Prijs\": product.prijs,\n                      \"Aantal\": aantal\n                    }]\n                  })\n                });\n\n              case 7:\n                this.emitProductToegevoegd();\n                this.forceer = false;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function plaatsBestellingDatumGebruiker(_x, _x2) {\n        return _plaatsBestellingDatumGebruiker.apply(this, arguments);\n      }\n\n      return plaatsBestellingDatumGebruiker;\n    }(),\n    forceerBestelling: function forceerBestelling() {\n      this.forceer = true;\n      this.plaatsBestellingDatumGebruiker(this.forceerProduct.product, this.forceerProduct.aantal);\n      this.popup = false;\n    },\n    close: function close() {\n      this.dialog = false;\n    },\n    emitProductToegevoegd: function emitProductToegevoegd() {\n      EventBus.$emit('Product_toegevoegd', this.datum);\n    },\n    fetchWinkel: function () {\n      var _fetchWinkel = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(datum) {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetch(\"\".concat(apiPath, \"winkel/\").concat(datum));\n\n              case 2:\n                response = _context2.sent;\n                _context2.next = 5;\n                return response.json();\n\n              case 5:\n                this.winkel = _context2.sent;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchWinkel(_x3) {\n        return _fetchWinkel.apply(this, arguments);\n      }\n\n      return fetchWinkel;\n    }(),\n    fetchData: function () {\n      var _fetchData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(datum) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.datum = datum;\n                _context3.next = 3;\n                return this.fetchWinkel(datum);\n\n              case 3:\n                this.fetchProducten(datum);\n                this.fetchDeadline(datum);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchData(_x4) {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }(),\n    fetchProducten: function () {\n      var _fetchProducten = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(datum) {\n        var response;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return fetch(\"\".concat(apiPath, \"product/\").concat(datum));\n\n              case 2:\n                response = _context4.sent;\n                _context4.next = 5;\n                return response.json();\n\n              case 5:\n                this.producten = _context4.sent;\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fetchProducten(_x5) {\n        return _fetchProducten.apply(this, arguments);\n      }\n\n      return fetchProducten;\n    }(),\n    fetchDeadline: function () {\n      var _fetchDeadline = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(datum) {\n        var response, unformattedDeadline;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return fetch(\"\".concat(apiPath, \"deadline/\").concat(datum));\n\n              case 2:\n                response = _context5.sent;\n                _context5.next = 5;\n                return response.json();\n\n              case 5:\n                unformattedDeadline = _context5.sent;\n                this.deadline = unformattedDeadline.substring(11, 16) + 'h, ' + unformattedDeadline.substring(0, 10);\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function fetchDeadline(_x6) {\n        return _fetchDeadline.apply(this, arguments);\n      }\n\n      return fetchDeadline;\n    }(),\n    createProduct: function () {\n      var _createProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6(productNaam, productPrijs) {\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                productPrijs = this.parsePrijs(productPrijs);\n                _context6.next = 3;\n                return fetch(\"\".concat(apiPath, \"product\"), {\n                  method: \"POST\",\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  body: _JSON$stringify({\n                    \"Naam\": productNaam,\n                    \"Prijs\": productPrijs,\n                    \"winkelId\": this.winkel.winkelId\n                  })\n                });\n\n              case 3:\n                this.fetchProducten(this.datum);\n                this.dialog = false;\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function createProduct(_x7, _x8) {\n        return _createProduct.apply(this, arguments);\n      }\n\n      return createProduct;\n    }()\n  }\n};",{"version":3,"sources":["C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\components\\Producten\\Producten.component.js"],"names":["Vue","EventBus","DatumSelectie","apiPath","name","data","deadline","dialog","search","headers","text","align","sortable","value","producten","winkel","Winkelnaam","toegevoegdeProducten","nieuwProduct","nieuwProductNaam","nieuwProductPrijs","datum","rules","prijsRule","testPrijs","required","hogerDanNul","popup","forceer","forceerProduct","product","aantal","rowsPerPageItems","components","created","$on","fetchData","methods","veldIngevuld","parsePrijs","prijs","index","indexOf","length","slice","pattern","test","prijsGeformatteerd","toString","substring","plaatsBestellingDatumGebruiker","fetch","method","body","productId","emitProductToegevoegd","forceerBestelling","close","$emit","fetchWinkel","response","json","fetchProducten","fetchDeadline","unformattedDeadline","createProduct","productNaam","productPrijs","winkelId"],"mappings":"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","sourcesContent":["import Vue from 'vue';\r\nimport EventBus from '../EventBus.js';\r\nimport DatumSelectie from '../Datumselectie/DatumSelectie.vue'\r\nimport apiPath from '../../Filepaths';\r\n\r\nexport default {\r\n    name: 'Producten',\r\n    data() {\r\n        return {\r\n            deadline: null,\r\n            dialog: false,\r\n            search: '',\r\n            headers: [\r\n                {\r\n                    text: 'Product',\r\n                    align: 'left',\r\n                    sortable: true,\r\n                    value: 'naam'\r\n                },\r\n                { text: 'Prijs', value: 'prijs' },\r\n            ],\r\n            producten: [],\r\n            winkel: {\r\n                Winkelnaam: null,\r\n            },\r\n            toegevoegdeProducten: [],\r\n            nieuwProduct: \"\",\r\n            nieuwProductNaam: \"\",\r\n            nieuwProductPrijs: \"\",\r\n            datum: null,\r\n            rules: {\r\n                prijsRule: value => {\r\n                    return this.testPrijs(value) || \"Foutief formaat.\";\r\n                },\r\n                required: value => !!value || \"Verplicht veld.\",\r\n                hogerDanNul: value => !(parseInt(value) < 0) || 'Kan niet negatief zijn.',\r\n            },\r\n            popup: false,\r\n            forceer: false,\r\n            forceerProduct: {\r\n                product: null,\r\n                aantal: null,\r\n            },\r\n            rowsPerPageItems: [10, 20, 30, { \"text\": \"All\", \"value\": -1 }],\r\n            \r\n           \r\n        };\r\n\r\n\r\n    },\r\n\r\n\r\n    components: {\r\n        DatumSelectie,\r\n        EventBus\r\n    },\r\n\r\n    created() {\r\n\r\n        EventBus.$on('Datum_update', (datum) => {\r\n        this.fetchData(datum);      \r\n        });\r\n\r\n    },\r\n\r\n\r\n    methods: {\r\n        veldIngevuld(value) {\r\n            return !!value;\r\n        },\r\n\r\n        parsePrijs(prijs) {\r\n            var index = prijs.indexOf('.');\r\n            if (index < 0) return prijs + \"00\";\r\n\r\n            if (prijs.length - index < 3) prijs = prijs + \"0\";\r\n            return prijs.slice(0, index) + prijs.slice(index + 1);\r\n        },\r\n\r\n        testPrijs(prijs) {\r\n            const pattern = /^[0-9]+(\\.[0-9]{1,2})?$/;\r\n            return pattern.test(prijs);\r\n        },\r\n\r\n        prijsGeformatteerd(prijs) {\r\n            prijs = prijs.toString();\r\n            while (prijs.length < 3) {\r\n                prijs = \"0\" + prijs;\r\n            }\r\n            return prijs.substring(0, prijs.length - 2) + \".\" + prijs.substring(prijs.length - 2);\r\n        },\r\n\r\n        async plaatsBestellingDatumGebruiker(product, aantal) {\r\n            if (parseInt(aantal) > 10 && !this.forceer) {\r\n                this.forceerProduct.product = product;\r\n                this.forceerProduct.aantal = aantal;\r\n                this.popup = true;\r\n                return;\r\n            }\r\n            await fetch(`${apiPath}bestelling`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n\r\n                    \"GebruikerId\": 1,\r\n                    \"Bezorgdatum\": this.datum,\r\n                                       \r\n                    \"ProductenPerBestellingen\": [{\r\n                        \"ProductId\": product.productId,\r\n                        \"Prijs\": product.prijs,\r\n                        \"Aantal\": aantal\r\n                 \r\n                    }]\r\n                }),\r\n\r\n\r\n            })\r\n\r\n            this.emitProductToegevoegd();\r\n\r\n            this.forceer = false;\r\n\r\n          \r\n        },\r\n\r\n        \r\n        forceerBestelling() {\r\n            this.forceer = true;\r\n            this.plaatsBestellingDatumGebruiker(this.forceerProduct.product, this.forceerProduct.aantal);\r\n            this.popup = false;\r\n        },\r\n\r\n        close() {\r\n            this.dialog = false\r\n        },\r\n\r\n        emitProductToegevoegd() {\r\n            EventBus.$emit('Product_toegevoegd', this.datum);\r\n        },\r\n\r\n        async fetchWinkel(datum) {\r\n            let response = await fetch(`${apiPath}winkel/${datum}`);\r\n            this.winkel = await response.json();\r\n        },\r\n\r\n        async fetchData(datum) {\r\n            this.datum = datum;\r\n            await this.fetchWinkel(datum);\r\n            this.fetchProducten(datum);\r\n            this.fetchDeadline(datum);\r\n        },\r\n\r\n        async fetchProducten(datum) {                    \r\n            let response = await fetch(`${apiPath}product/${datum}`);\r\n            this.producten = await response.json();\r\n        },\r\n\r\n        async fetchDeadline(datum) {\r\n            let response = await fetch(`${apiPath}deadline/${datum}`);\r\n            let unformattedDeadline = await response.json();\r\n            this.deadline = unformattedDeadline.substring(11, 16) + 'h, ' + unformattedDeadline.substring(0, 10)\r\n        },\r\n\r\n     \r\n        async createProduct(productNaam, productPrijs) {\r\n            productPrijs = this.parsePrijs(productPrijs);\r\n            await fetch(`${apiPath}product`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"Naam\": productNaam,\r\n                    \"Prijs\": productPrijs,\r\n                    \"winkelId\": this.winkel.winkelId\r\n                }),\r\n                \r\n            })\r\n            this.fetchProducten(this.datum);\r\n            this.dialog = false\r\n            \r\n        },\r\n        \r\n    }\r\n};\r\n"]}]}