{"remainingRequest":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\actions\\auth.js","dependencies":[{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\actions\\auth.js","mtime":1556010461551},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$values from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/values\";\nimport _Promise from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport JWT from 'jsonwebtoken';\nimport axios from '../http';\nexport var logout = function logout() {\n  return axios.post(\"Auth/Logout\");\n};\nexport var externalLogin = function externalLogin(provider, token, profile) {\n  return new _Promise(function (resolve, reject) {\n    axios.post(\"Auth/ExternalLogin\", {\n      provider: provider,\n      idToken: token\n    }).then(function (res) {\n      var refreshToken = res.data.refreshToken;\n      var accessToken = res.data.accessToken;\n      var apiUser = JWT.decode(accessToken);\n      resolve({\n        accessToken: accessToken,\n        refreshToken: refreshToken,\n        apiId: apiUser.nameid,\n        apiRole: apiUser.role,\n        name: profile.getGivenName(),\n        fullName: profile.getName(),\n        email: profile.getEmail(),\n        image: profile.getImageUrl()\n      });\n    }).catch(function (err) {\n      // For now just return the first error\n      if (err.response && err.response.data.errors) {\n        reject(new Error(_Object$values(err.response.data.errors)[0]));\n      }\n\n      reject(err);\n    });\n  });\n};",{"version":3,"sources":["C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\actions\\auth.js"],"names":["JWT","axios","logout","post","externalLogin","provider","token","profile","resolve","reject","idToken","then","res","refreshToken","data","accessToken","apiUser","decode","apiId","nameid","apiRole","role","name","getGivenName","fullName","getName","email","getEmail","image","getImageUrl","catch","err","response","errors","Error"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,cAAhB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACpB,SAAOD,KAAK,CAACE,IAAN,CAAW,aAAX,CAAP;AACP,CAFM;AAIP,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,QAAD,EAAWC,KAAX,EAAkBC,OAAlB,EAA8B;AACvD,SAAO,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCR,IAAAA,KAAK,CAACE,IAAN,CAAW,oBAAX,EAAiC;AAC7BE,MAAAA,QAAQ,EAARA,QAD6B;AAE7BK,MAAAA,OAAO,EAAEJ;AAFoB,KAAjC,EAGGK,IAHH,CAGQ,UAAAC,GAAG,EAAI;AACX,UAAIC,YAAY,GAAGD,GAAG,CAACE,IAAJ,CAASD,YAA5B;AACA,UAAIE,WAAW,GAAGH,GAAG,CAACE,IAAJ,CAASC,WAA3B;AACA,UAAIC,OAAO,GAAGhB,GAAG,CAACiB,MAAJ,CAAWF,WAAX,CAAd;AAEAP,MAAAA,OAAO,CAAC;AACJO,QAAAA,WAAW,EAAXA,WADI;AAEJF,QAAAA,YAAY,EAAZA,YAFI;AAGJK,QAAAA,KAAK,EAAEF,OAAO,CAACG,MAHX;AAIJC,QAAAA,OAAO,EAAEJ,OAAO,CAACK,IAJb;AAKJC,QAAAA,IAAI,EAAEf,OAAO,CAACgB,YAAR,EALF;AAMJC,QAAAA,QAAQ,EAAEjB,OAAO,CAACkB,OAAR,EANN;AAOJC,QAAAA,KAAK,EAAEnB,OAAO,CAACoB,QAAR,EAPH;AAQJC,QAAAA,KAAK,EAAErB,OAAO,CAACsB,WAAR;AARH,OAAD,CAAP;AAUH,KAlBD,EAkBGC,KAlBH,CAkBS,UAAAC,GAAG,EAAI;AACZ;AACA,UAAIA,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAalB,IAAb,CAAkBmB,MAAtC,EAA8C;AAC1CxB,QAAAA,MAAM,CAAC,IAAIyB,KAAJ,CACH,eAAcH,GAAG,CAACC,QAAJ,CAAalB,IAAb,CAAkBmB,MAAhC,EAAwC,CAAxC,CADG,CAAD,CAAN;AAGH;;AACDxB,MAAAA,MAAM,CAACsB,GAAD,CAAN;AACH,KA1BD;AA2BH,GA5BM,CAAP;AA6BH,CA9BM","sourcesContent":["import JWT from 'jsonwebtoken'\r\n\r\nimport axios from '../http'\r\n\r\nexport const logout = () => {\r\n        return axios.post(\"Auth/Logout\")\r\n}\r\n\r\nexport const externalLogin = (provider, token, profile) => {\r\n    return new Promise((resolve, reject) => {\r\n        axios.post(\"Auth/ExternalLogin\", {\r\n            provider,\r\n            idToken: token\r\n        }).then(res => {\r\n            let refreshToken = res.data.refreshToken\r\n            let accessToken = res.data.accessToken\r\n            let apiUser = JWT.decode(accessToken)\r\n\r\n            resolve({\r\n                accessToken,\r\n                refreshToken,\r\n                apiId: apiUser.nameid,\r\n                apiRole: apiUser.role,\r\n                name: profile.getGivenName(),\r\n                fullName: profile.getName(),\r\n                email: profile.getEmail(),\r\n                image: profile.getImageUrl()\r\n            });\r\n        }).catch(err => {\r\n            // For now just return the first error\r\n            if (err.response && err.response.data.errors) {\r\n                reject(new Error(\r\n                    Object.values(err.response.data.errors)[0]\r\n                ))\r\n            }\r\n            reject(err)\r\n        })\r\n    })\r\n}"]}]}