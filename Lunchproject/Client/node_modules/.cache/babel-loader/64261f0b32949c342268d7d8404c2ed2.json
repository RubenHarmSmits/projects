{"remainingRequest":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\router.js","dependencies":[{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\router.js","mtime":1556010479779},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\rsmits\\\\Documents\\\\lanthir-lunch\\\\Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Producten from \"./components/Producten/Producten\";\nimport Winkeloverzicht from \"./components/Winkeloverzicht/Winkeloverzicht\";\nimport Bestelling from './components/Bestelling/Bestelling.vue';\nimport Bestelhistorie from './components/Bestelhistorie/Bestelhistorie.vue';\nimport Bestellijst from './components/Bestellijst/Bestellijst.vue';\nimport Login from './components/Login/Login.vue';\nimport Uitzonderingen from './components/Uitzonderingen/Uitzonderingen.vue';\nimport Home from './Home.vue';\nimport Categorien from './components/Categorien/Categorie.vue';\nimport LoginComponent from \"./components/Login/Login.component\";\nimport store from './store';\nimport { types as authTypes } from \"./store/auth\";\nimport { types as messageTypes } from \"./store/message\";\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  routes: [{\n    path: '/producten',\n    name: \"Producten\",\n    component: Producten\n  }, {\n    path: '/bestelling',\n    component: Bestelling\n  }, {\n    path: '/bestelhistorie',\n    component: Bestelhistorie\n  }, {\n    path: '/bestellijst',\n    component: Bestellijst\n  }, {\n    path: '/winkeloverzicht',\n    component: Winkeloverzicht,\n    meta: {\n      allowedRoles: [\"Admin\"]\n    }\n  }, {\n    name: 'login',\n    path: '/login',\n    component: Login,\n    meta: {\n      guest: true\n    },\n    props: true\n  }, {\n    path: '/uitzonderingen',\n    component: Uitzonderingen\n  }, {\n    path: '/categorien',\n    component: Categorien\n  }, {\n    path: '/',\n    component: Home,\n    children: [{\n      path: '/',\n      components: {\n        default: Producten,\n        helper: Bestelling\n      }\n    }]\n  }, {\n    path: '*',\n    redirect: '/'\n  }]\n});\nrouter.beforeEach(\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(to, from, next) {\n    var user;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(!store.state.auth.authenticated && !to.matched.some(function (rec) {\n              return rec.meta.guest;\n            }))) {\n              _context.next = 4;\n              break;\n            }\n\n            if (to.path !== \"/\") {\n              store.dispatch(\"\".concat(messageTypes.name, \"/\").concat(messageTypes.actions.onSetMessage), {\n                target: 'login',\n                message: \"Om dit te doen moet je ingelogd zijn\",\n                status: messageTypes.status.warning\n              });\n            }\n\n            next({\n              name: 'login',\n              params: {\n                redirectUrl: to.path\n              }\n            });\n            return _context.abrupt(\"return\");\n\n          case 4:\n            user = store.getters[\"\".concat(authTypes.name, \"/\").concat(authTypes.getters.getUser)]; // Redirect to the homepage when the user doesnt have a required role\n\n            if (!to.matched.some(function (rec) {\n              return rec.meta.roles && !rec.meta.roles.some(function (role) {\n                return user.roles.includes(role);\n              });\n            })) {\n              _context.next = 8;\n              break;\n            }\n\n            next({\n              path: '/'\n            });\n            return _context.abrupt(\"return\");\n\n          case 8:\n            next();\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.afterEach(function (to, from) {\n  // clear any pending messages\n  if (from.name && store.state.message.messages[from.name]) {\n    store.dispatch(\"\".concat(messageTypes.name, \"/\").concat(messageTypes.actions.onClearMessage));\n  }\n});\nexport default router;",{"version":3,"sources":["C:\\Users\\rsmits\\Documents\\lanthir-lunch\\Client\\src\\router.js"],"names":["Vue","Router","Producten","Winkeloverzicht","Bestelling","Bestelhistorie","Bestellijst","Login","Uitzonderingen","Home","Categorien","LoginComponent","store","types","authTypes","messageTypes","use","router","mode","routes","path","name","component","meta","allowedRoles","guest","props","children","components","default","helper","redirect","beforeEach","to","from","next","state","auth","authenticated","matched","some","rec","dispatch","actions","onSetMessage","target","message","status","warning","params","redirectUrl","user","getters","getUser","roles","role","includes","afterEach","messages","onClearMessage"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,eAAP,MAA4B,8CAA5B;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,cAAP,MAA2B,gDAA3B;AACA,OAAOC,WAAP,MAAwB,0CAAxB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,cAAP,MAA2B,gDAA3B;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,cAAnC;AACA,SAASD,KAAK,IAAIE,YAAlB,QAAsC,iBAAtC;AAEAf,GAAG,CAACgB,GAAJ,CAAQf,MAAR;AAEA,IAAIgB,MAAM,GAAG,IAAIhB,MAAJ,CAAW;AACtBiB,EAAAA,IAAI,EAAE,SADgB;AAEtBC,EAAAA,MAAM,EAAG,CACP;AAAEC,IAAAA,IAAI,EAAE,YAAR;AAAsBC,IAAAA,IAAI,EAAC,WAA3B;AAAwCC,IAAAA,SAAS,EAAEpB;AAAnD,GADO,EAEP;AAAEkB,IAAAA,IAAI,EAAE,aAAR;AAAuBE,IAAAA,SAAS,EAAElB;AAAlC,GAFO,EAGP;AAAEgB,IAAAA,IAAI,EAAE,iBAAR;AAA2BE,IAAAA,SAAS,EAAEjB;AAAtC,GAHO,EAIP;AAAEe,IAAAA,IAAI,EAAE,cAAR;AAAwBE,IAAAA,SAAS,EAAEhB;AAAnC,GAJO,EAKP;AAAEc,IAAAA,IAAI,EAAE,kBAAR;AAA4BE,IAAAA,SAAS,EAAEnB,eAAvC;AAAwDoB,IAAAA,IAAI,EAAE;AAAEC,MAAAA,YAAY,EAAE,CAAC,OAAD;AAAhB;AAA9D,GALO,EAMP;AAAEH,IAAAA,IAAI,EAAE,OAAR;AAAiBD,IAAAA,IAAI,EAAE,QAAvB;AAAiCE,IAAAA,SAAS,EAAEf,KAA5C;AAAmDgB,IAAAA,IAAI,EAAE;AAAEE,MAAAA,KAAK,EAAE;AAAT,KAAzD;AAA0EC,IAAAA,KAAK,EAAE;AAAjF,GANO,EAOP;AAAEN,IAAAA,IAAI,EAAE,iBAAR;AAA2BE,IAAAA,SAAS,EAAEd;AAAtC,GAPO,EAQP;AAAEY,IAAAA,IAAI,EAAE,aAAR;AAAuBE,IAAAA,SAAS,EAAEZ;AAAlC,GARO,EASP;AACIU,IAAAA,IAAI,EAAE,GADV;AACeE,IAAAA,SAAS,EAAEb,IAD1B;AAEIkB,IAAAA,QAAQ,EAAE,CACN;AACIP,MAAAA,IAAI,EAAE,GADV;AAEIQ,MAAAA,UAAU,EAAE;AACRC,QAAAA,OAAO,EAAE3B,SADD;AAER4B,QAAAA,MAAM,EAAE1B;AAFA;AAFhB,KADM;AAFd,GATO,EAoBP;AAAEgB,IAAAA,IAAI,EAAE,GAAR;AAAaW,IAAAA,QAAQ,EAAE;AAAvB,GApBO;AAFa,CAAX,CAAb;AA2BAd,MAAM,CAACe,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGV,CAACvB,KAAK,CAACwB,KAAN,CAAYC,IAAZ,CAAiBC,aAAlB,IAAmC,CAACL,EAAE,CAACM,OAAH,CAAWC,IAAX,CAAgB,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAAClB,IAAJ,CAASE,KAAb;AAAA,aAAnB,CAH1B;AAAA;AAAA;AAAA;;AAIV,gBAAIQ,EAAE,CAACb,IAAH,KAAY,GAAhB,EAAqB;AACjBR,cAAAA,KAAK,CAAC8B,QAAN,WAAkB3B,YAAY,CAACM,IAA/B,cAAuCN,YAAY,CAAC4B,OAAb,CAAqBC,YAA5D,GAA4E;AACxEC,gBAAAA,MAAM,EAAE,OADgE;AAExEC,gBAAAA,OAAO,EAAE,sCAF+D;AAGxEC,gBAAAA,MAAM,EAAEhC,YAAY,CAACgC,MAAb,CAAoBC;AAH4C,eAA5E;AAKH;;AACDb,YAAAA,IAAI,CAAC;AACDd,cAAAA,IAAI,EAAE,OADL;AAED4B,cAAAA,MAAM,EAAE;AACJC,gBAAAA,WAAW,EAAEjB,EAAE,CAACb;AADZ;AAFP,aAAD,CAAJ;AAXU;;AAAA;AAoBV+B,YAAAA,IApBU,GAoBHvC,KAAK,CAACwC,OAAN,WAAiBtC,SAAS,CAACO,IAA3B,cAAmCP,SAAS,CAACsC,OAAV,CAAkBC,OAArD,EApBG,EAsBd;;AAtBc,iBAuBVpB,EAAE,CAACM,OAAH,CAAWC,IAAX,CAAgB,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAAClB,IAAJ,CAAS+B,KAAT,IACpB,CAACb,GAAG,CAAClB,IAAJ,CAAS+B,KAAT,CAAed,IAAf,CAAoB,UAAAe,IAAI;AAAA,uBAAIJ,IAAI,CAACG,KAAL,CAAWE,QAAX,CAAoBD,IAApB,CAAJ;AAAA,eAAxB,CADe;AAAA,aAAnB,CAvBU;AAAA;AAAA;AAAA;;AA0BNpB,YAAAA,IAAI,CAAC;AACDf,cAAAA,IAAI,EAAE;AADL,aAAD,CAAJ;AA1BM;;AAAA;AAgCde,YAAAA,IAAI;;AAhCU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAmCAlB,MAAM,CAACwC,SAAP,CAAiB,UAACxB,EAAD,EAAKC,IAAL,EAAc;AAC3B;AACA,MAAIA,IAAI,CAACb,IAAL,IAAaT,KAAK,CAACwB,KAAN,CAAYU,OAAZ,CAAoBY,QAApB,CAA6BxB,IAAI,CAACb,IAAlC,CAAjB,EAA0D;AACtDT,IAAAA,KAAK,CAAC8B,QAAN,WAAkB3B,YAAY,CAACM,IAA/B,cAAuCN,YAAY,CAAC4B,OAAb,CAAqBgB,cAA5D;AACH;AACJ,CALD;AAOA,eAAe1C,MAAf","sourcesContent":["import Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\nimport Producten from \"./components/Producten/Producten\";\r\nimport Winkeloverzicht from \"./components/Winkeloverzicht/Winkeloverzicht\";\r\nimport Bestelling from './components/Bestelling/Bestelling.vue';\r\nimport Bestelhistorie from './components/Bestelhistorie/Bestelhistorie.vue';\r\nimport Bestellijst from './components/Bestellijst/Bestellijst.vue';\r\nimport Login from './components/Login/Login.vue'\r\nimport Uitzonderingen from './components/Uitzonderingen/Uitzonderingen.vue';\r\nimport Home from './Home.vue'\r\nimport Categorien from './components/Categorien/Categorie.vue'\r\nimport LoginComponent from \"./components/Login/Login.component\";\r\n\r\nimport store from './store'\r\nimport { types as authTypes } from \"./store/auth\"\r\nimport { types as messageTypes } from \"./store/message\"\r\n\r\nVue.use(Router);\r\n\r\nvar router = new Router({\r\n  mode: 'history',\r\n  routes : [\r\n    { path: '/producten', name:\"Producten\", component: Producten },\r\n    { path: '/bestelling', component: Bestelling },\r\n    { path: '/bestelhistorie', component: Bestelhistorie },\r\n    { path: '/bestellijst', component: Bestellijst },\r\n    { path: '/winkeloverzicht', component: Winkeloverzicht, meta: { allowedRoles: [\"Admin\"]} },\r\n    { name: 'login', path: '/login', component: Login, meta: { guest: true }, props: true },\r\n    { path: '/uitzonderingen', component: Uitzonderingen },\r\n    { path: '/categorien', component: Categorien },\r\n    {\r\n        path: '/', component: Home,\r\n        children: [\r\n            {\r\n                path: '/',\r\n                components: {\r\n                    default: Producten,\r\n                    helper: Bestelling\r\n                }\r\n            }]\r\n    },\r\n    { path: '*', redirect: '/' }\r\n\r\n]\r\n});\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n    // If the user is not logged in and the page doesnt allow \r\n    // guest access, redirect to the login page\r\n    if (!store.state.auth.authenticated && !to.matched.some(rec => rec.meta.guest)) {\r\n        if (to.path !== \"/\") {\r\n            store.dispatch(`${messageTypes.name}/${messageTypes.actions.onSetMessage}`, {\r\n                target: 'login',\r\n                message: \"Om dit te doen moet je ingelogd zijn\",\r\n                status: messageTypes.status.warning\r\n            })\r\n        }\r\n        next({\r\n            name: 'login',\r\n            params: {\r\n                redirectUrl: to.path\r\n            }\r\n        });\r\n        return;\r\n    }\r\n\r\n    var user = store.getters[`${authTypes.name}/${authTypes.getters.getUser}`]\r\n\r\n    // Redirect to the homepage when the user doesnt have a required role\r\n    if (to.matched.some(rec => rec.meta.roles \r\n        && !rec.meta.roles.some(role => user.roles.includes(role)))) \r\n        {\r\n            next({\r\n                path: '/'\r\n            })\r\n            return;\r\n        }\r\n    \r\n    next();\r\n});\r\n\r\nrouter.afterEach((to, from) => {\r\n    // clear any pending messages\r\n    if (from.name && store.state.message.messages[from.name]) {\r\n        store.dispatch(`${messageTypes.name}/${messageTypes.actions.onClearMessage}`)\r\n    }\r\n})\r\n\r\nexport default router;"]}]}